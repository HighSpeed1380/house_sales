/**
 * jQuery Masonry v2.1.06
 * A dynamic layout plugin for jQuery
 * The flip-side of CSS Floats
 * http://masonry.desandro.com
 *
 * Licensed under the MIT license.
 * Copyright 2012 David DeSandro
 */
(function(f,e){var h=e.event,i;h.special.smartresize={setup:function(){e(this).bind("resize",h.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",h.special.smartresize.handler)},handler:function(a,c){var b=this,d=arguments;a.type="smartresize";i&&clearTimeout(i);i=setTimeout(function(){e.event.handle.apply(b,d)},"execAsap"===c?0:100)}};e.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])};e.Mason=function(a,c){this.element= e(c);this._create(a);this._init()};e.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,fraudWidth:0,isFitWidth:!1,containerStyle:{position:"relative"}};e.Mason.prototype={_filterFindBricks:function(a){var c=this.options.itemSelector;return!c?a:a.filter(c).add(a.find(c))},_getBricks:function(a){return this._filterFindBricks(a).css({position:"absolute"}).addClass("masonry-brick")},_create:function(a){this.options=e.extend(!0,{},e.Mason.settings, a);this.styleQueue=[];a=this.element[0].style;this.originalStyle={height:a.height||""};var c=this.options.containerStyle,b;for(b in c)this.originalStyle[b]=a[b]||"";this.element.css(c);this.horizontalDirection=this.options.isRTL?"right":"left";b=this.element.css("padding-"+this.horizontalDirection);a=this.element.css("padding-top");this.offset={x:b?parseInt(b,10):0,y:a?parseInt(a,10):0};this.isFluid=this.options.columnWidth&&"function"===typeof this.options.columnWidth;var d=this;setTimeout(function(){d.element.addClass("masonry")}, 0);this.options.isResizable&&e(f).bind("smartresize.masonry",function(){d.resize()});this.reloadItems()},_init:function(a){this._getColumns();this._reLayout(a)},option:function(a){e.isPlainObject(a)&&(this.options=e.extend(!0,this.options,a))},layout:function(a,c){for(var b=0,d=a.length;b<d;b++)this._placeBrick(a[b]);d={};d.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){for(var e=0,b=this.cols;--b&&0===this.colYs[b];)e++;d.width=(this.cols-e)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element, style:d});for(var e=!this.isLaidOut?"css":this.options.isAnimated?"animate":"css",g=this.options.animationOptions,f,b=0,d=this.styleQueue.length;b<d;b++)f=this.styleQueue[b],f.$el[e](f.style,g);this.styleQueue=[];c&&c.call(a);this.isLaidOut=!0},_getColumns:function(){var a=(this.options.isFitWidth?this.element.parent():this.element).width(),a=a+this.options.fraudWidth;this.columnWidth=this.isFluid?this.options.columnWidth(a):this.options.columnWidth||this.$bricks.outerWidth(!0)||a;this.columnWidth+= this.options.gutterWidth;this.cols=Math.floor((a+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(a){var a=e(a),c,b,d,f,g;c=Math.ceil(a.outerWidth(!0)/this.columnWidth);c=Math.min(c,this.cols);if(1===c)d=this.colYs;else{b=this.cols+1-c;d=[];for(g=0;g<b;g++)f=this.colYs.slice(g,g+c),d[g]=Math.max.apply(Math,f)}g=Math.min.apply(Math,d);b=c=0;for(f=d.length;b<f;b++)if(d[b]===g){c=b;break}d={top:g+this.offset.y};d[this.horizontalDirection]=this.columnWidth* c+this.offset.x;this.styleQueue.push({$el:a,style:d});a=g+a.outerHeight(!0);d=this.cols+1-f;for(b=0;b<d;b++)this.colYs[c+b]=a},resize:function(){var a=this.cols;this._getColumns();(this.isFluid||this.cols!==a)&&this._reLayout()},_reLayout:function(a){var c=this.cols;for(this.colYs=[];c--;)this.colYs.push(0);this.layout(this.$bricks,a)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(a){this.reloadItems();this._init(a)},appended:function(a,c,b){if(c){this._filterFindBricks(a).css({top:this.element.height()}); var d=this;setTimeout(function(){d._appended(a,b)},1)}else this._appended(a,b)},_appended:function(a,c){var b=this._getBricks(a);this.$bricks=this.$bricks.add(b);this.layout(b,c)},remove:function(a){this.$bricks=this.$bricks.not(a);a.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});var a=this.element[0].style,c;for(c in this.originalStyle)a[c]=this.originalStyle[c];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"); e(f).unbind(".masonry")}};e.fn.imagesLoaded=function(a){function c(){a.call(d,f)}function b(a){a=a.target;a.src!==h&&-1===e.inArray(a,i)&&(i.push(a),0>=--g&&(setTimeout(c),f.unbind(".imagesLoaded",b)))}var d=this,f=d.find("img").add(d.filter("img")),g=f.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i=[];g||c();f.bind("load.imagesLoaded error.imagesLoaded",b).each(function(){var a=this.src;this.src=h;this.src=a});return d};e.fn.masonry=function(a){if("string"=== typeof a){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var b=e.data(this,"masonry");b?!e.isFunction(b[a])||"_"===a.charAt(0)?f.console&&f.console.error("no such method '"+a+"' for masonry instance"):b[a].apply(b,c):f.console&&f.console.error("cannot call methods on masonry prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var b=e.data(this,"masonry");b?(b.option(a||{}),b._init()):e.data(this,"masonry",new e.Mason(a,this))});return this}})(window, jQuery);